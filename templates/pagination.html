<!-- Pagination Component -->
{% if pagination and pagination.total_pages > 1 %}
<nav aria-label="Page navigation" class="mt-4">
    <div class="text-center">
        <div class="text-muted mb-3">
            Showing {{ ((pagination.page - 1) * pagination.per_page + 1) }} to {{ min(pagination.page * pagination.per_page, pagination.total) }} of {{ pagination.total }} results
        </div>
        <ul class="pagination justify-content-center mb-0">
            <!-- Previous Page -->
            <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
                <a class="page-link" href="{{ url_for(request.endpoint, page=pagination.prev_page, **request.args.to_dict()|reject_page) }}" {% if not pagination.has_prev %}tabindex="-1" aria-disabled="true"{% endif %}>
                    <i class="bi bi-chevron-left"></i> Previous
                </a>
            </li>
            
            <!-- Page Numbers -->
            {% set start_page = max(1, pagination.page - 2) %}
            {% set end_page = min(pagination.total_pages, pagination.page + 2) %}
            
            {% if start_page > 1 %}
                <li class="page-item">
                    <a class="page-link" href="{{ url_for(request.endpoint, page=1, **request.args.to_dict()|reject_page) }}">1</a>
                </li>
                {% if start_page > 2 %}
                    <li class="page-item disabled"><span class="page-link">...</span></li>
                {% endif %}
            {% endif %}
            
            {% for page_num in range(start_page, end_page + 1) %}
                <li class="page-item {% if page_num == pagination.page %}active{% endif %}">
                    <a class="page-link" href="{{ url_for(request.endpoint, page=page_num, **request.args.to_dict()|reject_page) }}">{{ page_num }}</a>
                </li>
            {% endfor %}
            
            {% if end_page < pagination.total_pages %}
                {% if end_page < pagination.total_pages - 1 %}
                    <li class="page-item disabled"><span class="page-link">...</span></li>
                {% endif %}
                <li class="page-item">
                    <a class="page-link" href="{{ url_for(request.endpoint, page=pagination.total_pages, **request.args.to_dict()|reject_page) }}">{{ pagination.total_pages }}</a>
                </li>
            {% endif %}
            
            <!-- Next Page -->
            <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
                <a class="page-link" href="{{ url_for(request.endpoint, page=pagination.next_page, **request.args.to_dict()|reject_page) }}" {% if not pagination.has_next %}tabindex="-1" aria-disabled="true"{% endif %}>
                    Next <i class="bi bi-chevron-right"></i>
                </a>
            </li>
        </ul>
    </div>
</nav>
{% endif %}

